<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flush The Toilet</title>
    <style>
        body {
            margin: 0;
            font-family: 'Comic Sans MS', 'Chalkboard SE', 'Marker Felt', sans-serif;
            color: white;
            overflow: hidden; /* Prevent scrollbars */
        }
        .screen {
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 20px;
            box-sizing: border-box;
            position: absolute;
            top: 0;
            left: 0;
        }
        .hidden {
            display: none;
        }

        /* Title Screen */
        #title-screen {
            background-color: #00AEEF; /* Bright Blue */
        }
        #title-screen h1 {
            font-size: 6vw; /* Responsive font size */
            margin-bottom: 30px;
            line-height: 1.2;
        }
        .title-button {
            font-size: 4vw;
            padding: 15px 30px;
            border: none;
            cursor: pointer;
            margin: 10px;
            font-weight: bold;
            width: 50%;
            max-width: 400px;
        }
        #start-button {
            background-color: #66FF33; /* Bright Green */
            color: white;
        }
        #speedrun-button {
            background-color: #FF007F; /* Pink */
            color: white;
            font-size: 3vw;
        }
        #speedrun-status {
            font-size: 2.5vw;
        }
        .version-bar {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: #66FF33; /* Bright Green */
            padding: 10px 0;
            font-size: 2.5vw;
            color: white;
        }
        .toilet-icon-title {
             position: absolute;
             left: 5%;
             bottom: 15%;
             font-size: 15vw; /* Large toilet emoji */
             transform: translateY(50%);
        }


        /* Game Screen */
        #game-screen {
            background-color: #00AEEF; /* Bright Blue */
            justify-content: flex-start;
        }
        .objective {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 3.5vw;
            color: red;
            font-weight: bold;
        }
        .flush-area {
            position: absolute;
            top: 25%;
            left: 10%;
            display: flex;
            align-items: center;
        }
        #flush-button {
            width: 10vw;
            height: 10vw;
            max-width: 80px;
            max-height: 80px;
            background-color: white;
            border: 2px solid black;
            cursor: pointer;
            margin-right: 20px;
        }
        .flush-text {
            font-size: 3vw;
            color: white;
        }
        .toilet-icon-game {
            position: absolute;
            left: 15%;
            top: 45%;
            font-size: 20vw; /* Large toilet emoji */
        }
        .game-bottom-bar {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 15%;
            background-color: #66FF33; /* Bright Green */
            display: flex;
            justify-content: flex-end;
            align-items: center;
            padding-right: 20px;
            box-sizing: border-box;
        }
        #pause-button-area {
            display: flex;
            cursor: pointer;
        }
        .pause-square {
            width: 5vw;
            height: 5vw;
            max-width: 40px;
            max-height: 40px;
            background-color: blue;
            border: 2px solid black;
            margin-left: 5px;
        }
        .poop-overlay {
             position: absolute;
             left: 0; /* Adjust as needed relative to toilet emoji */
             top: 30%; /* Adjust as needed */
             font-size: 8vw;
             color: #795548; /* Brown */
             opacity: 0.7;
             pointer-events: none; /* Allow clicking through */
        }


        /* Pause Screen */
        #pause-screen {
            background-color: rgba(0, 0, 0, 0.7); /* Dark overlay */
            color: white;
        }
         .pause-box {
            background-color: #003366; /* Dark Blue */
             padding: 40px;
             border: 5px solid white;
             display: flex;
             flex-direction: column;
             align-items: center;
             width: 70%;
             max-width: 500px;
         }
        .pause-title {
            font-size: 5vw;
            margin-bottom: 30px;
        }
        .pause-button {
            font-size: 3.5vw;
            padding: 15px 30px;
            border: none;
            cursor: pointer;
            margin: 10px;
            font-weight: bold;
            background-color: yellow;
            color: black;
            width: 80%;
         }

        /* Ending Screens */
        #good-ending-screen { background-color: #66FF33; /* Bright Green */ }
        #bad-ending-screen { background-color: red; }
        #secret-ending-screen { background-color: #444; /* Dark Grey */ }

        .ending-title {
            font-size: 6vw;
            margin-bottom: 20px;
        }
        .ending-subtitle {
            font-size: 3.5vw;
            margin-bottom: 40px;
        }
        .restart-button {
            background-color: blue;
            color: white;
            font-size: 3vw;
            padding: 15px 30px;
            border: none;
            cursor: pointer;
            font-weight: bold;
        }

        /* Explosion Screen */
        #explosion-screen {
             background-color: #00AEEF; /* Bright Blue */
             justify-content: center;
             align-items: center;
        }
        .explosion-box {
             background-color: #003366; /* Dark Blue */
             padding: 20px;
             border: 5px solid red;
             text-align: center;
             width: 80%;
             max-width: 600px;
         }
        .explosion-text {
            font-size: 4vw;
            color: red;
            font-weight: bold;
            margin-bottom: 20px;
        }
         .explosion-icon {
             font-size: 15vw; /* Large bomb emoji */
             margin-bottom: 20px;
             display: inline-block; /* Allows margin */
         }
        #hell-button {
             font-size: 4vw;
             padding: 15px 40px;
             border: none;
             cursor: pointer;
             font-weight: bold;
             background-color: yellow;
             color: red;
             width: 60%;
         }

        /* Escape Screen */
        #escape-screen {
            background-color: black;
            justify-content: center;
            align-items: center;
        }
        .escape-text {
            font-size: 3vw;
            margin-bottom: 50px;
        }
        .escape-arrow {
            font-size: 5vw;
            cursor: pointer;
            position: absolute;
            bottom: 20px;
            right: 20px;
            font-family: monospace; /* For pixelated look */
        }

        /* Sans Screen */
        #sans-screen {
            background-color: black;
            justify-content: center;
            align-items: center;
            font-family: 'Courier New', Courier, monospace;
        }
        .sans-icon {
            font-size: 15vw;
            margin-bottom: 20px;
        }
        .dialogue-box {
            border: 4px solid white;
            padding: 20px;
            width: 80%;
            max-width: 700px;
            margin-bottom: 30px;
            font-size: 2.5vw;
            line-height: 1.4;
        }
        .sans-options {
            display: flex;
            justify-content: space-around;
            width: 80%;
            max-width: 700px;
        }
        .sans-button {
            font-size: 3vw;
            cursor: pointer;
            font-weight: bold;
            padding: 10px 20px;
        }
        #fight-button {
            color: red;
            border: 4px solid red;
        }
        #mercy-button {
            color: lime;
            border: 4px solid lime;
        }

        /* Simple toilet fill effect */
        .toilet-water {
             position: absolute;
             left: 30%; /* Adjust relative to toilet emoji */
             top: 45%; /* Adjust relative to toilet emoji */
             width: 40%; /* Adjust relative to toilet emoji */
             height: 15%; /* Adjust relative to toilet emoji */
             background-color: #66FFCC; /* Aqua-like */
             opacity: 0.6;
             border-radius: 50% / 30%; /* Oval shape */
             pointer-events: none;
             z-index: -1; /* Behind emoji */
         }

    </style>
</head>
<body>

    <!-- Title Screen -->
    <div id="title-screen" class="screen">
        <div class="toilet-icon-title">🚽</div>
        <h1>Flush<br>The<br>Toilet</h1>
        <button id="start-button" class="title-button">START</button>
        <button id="speedrun-button" class="title-button">
            Speedrun Mode
            <div id="speedrun-status">Off</div>
        </button>
        <div class="version-bar">Version 0.8</div>
    </div>

    <!-- Game Screen -->
    <div id="game-screen" class="screen hidden">
        <div id="objective-text" class="objective">Objective:<br>Flush the toilet.</div>
        <div class="flush-area">
            <div id="flush-button"></div>
            <span class="flush-text">&lt;-- press to flush</span>
        </div>
        <div class="toilet-icon-game">
            🚽
            <div id="toilet-fill" class="toilet-water hidden"></div> <!-- Water fill effect -->
             <div id="poop-overlay" class="poop-overlay hidden">💩</div> <!-- Poop -->
        </div>
        <div class="game-bottom-bar">
            <div id="pause-button-area">
                <div class="pause-square"></div>
                <div class="pause-square"></div>
            </div>
        </div>
    </div>

    <!-- Pause Screen -->
    <div id="pause-screen" class="screen hidden">
         <div class="pause-box">
            <div class="pause-title">Game Paused</div>
            <button id="resume-button" class="pause-button">Resume</button>
            <button id="quit-button" class="pause-button">Quit</button>
            <button id="papyrus-button" class="pause-button">PAPYRUS</button>
        </div>
    </div>

    <!-- Good Ending Screen -->
    <div id="good-ending-screen" class="screen hidden">
        <div class="ending-title">Good Ending</div>
        <div class="ending-subtitle">Ate papyrus's spaghetti</div>
        <button class="restart-button">Restart game</button>
    </div>

    <!-- Bad Ending Screen -->
    <div id="bad-ending-screen" class="screen hidden">
        <div class="ending-title">Bad Ending</div>
        <div class="ending-subtitle">Exploded the toilet.</div>
        <button class="restart-button">Restart game</button>
    </div>

    <!-- Secret Ending Screen -->
    <div id="secret-ending-screen" class="screen hidden">
        <div class="ending-title">Secret Ending</div>
        <div class="ending-subtitle">Fucked coom guy and ate his coom</div>
        <button class="restart-button">Restart game</button>
    </div>

    <!-- Explosion Screen -->
    <div id="explosion-screen" class="screen hidden">
        <div class="explosion-box">
            <div class="explosion-text">
                YOU EXPLODED THE<br>
                FUCKING TOILET!!!<br>
                LOOK WHAT YOU<br>
                HAVE DONE
            </div>
            <div class="explosion-icon">💣</div> <!-- Simple bomb emoji -->
            <button id="hell-button">HELL.</button>
        </div>
         <!-- Bottom bar just for visual consistency -->
         <div class="game-bottom-bar">
            <div id="pause-button-area-disabled">
                <div class="pause-square"></div>
                <div class="pause-square"></div>
            </div>
        </div>
    </div>

    <!-- Escape Screen -->
    <div id="escape-screen" class="screen hidden">
        <div class="escape-text">It seems like you tried to escape when the toilet was about to explode.</div>
        <div id="escape-continue" class="escape-arrow">&gt;</div>
    </div>

    <!-- Sans Screen -->
    <div id="sans-screen" class="screen hidden">
        <div class="sans-icon">💀</div> <!-- Simple skull emoji -->
        <div class="dialogue-box">
            * YOU SHOULDN'T HAVE EXPLODED THAT TOILET.
        </div>
        <div class="sans-options">
            <div id="fight-button" class="sans-button">⚔️ FIGHT</div>
            <div id="mercy-button" class="sans-button">❤️ MERCY</div>
        </div>
    </div>


    <script>
        const screens = {
            title: document.getElementById('title-screen'),
            game: document.getElementById('game-screen'),
            pause: document.getElementById('pause-screen'),
            goodEnding: document.getElementById('good-ending-screen'),
            badEnding: document.getElementById('bad-ending-screen'),
            secretEnding: document.getElementById('secret-ending-screen'),
            explosion: document.getElementById('explosion-screen'),
            escape: document.getElementById('escape-screen'),
            sans: document.getElementById('sans-screen'),
        };

        const buttons = {
            start: document.getElementById('start-button'),
            speedrun: document.getElementById('speedrun-button'),
            speedrunStatus: document.getElementById('speedrun-status'),
            flush: document.getElementById('flush-button'),
            pauseArea: document.getElementById('pause-button-area'),
            resume: document.getElementById('resume-button'),
            quit: document.getElementById('quit-button'),
            papyrus: document.getElementById('papyrus-button'),
            hell: document.getElementById('hell-button'),
            escapeContinue: document.getElementById('escape-continue'),
            fight: document.getElementById('fight-button'),
            mercy: document.getElementById('mercy-button'),
            restart: document.querySelectorAll('.restart-button'), // Select all restart buttons
        };

        const elements = {
            objectiveText: document.getElementById('objective-text'),
            toiletFill: document.getElementById('toilet-fill'),
            poopOverlay: document.getElementById('poop-overlay'),
        };

        let gameState = 'title'; // title, playing, paused, ending
        let speedrunMode = false;
        let objective = 'flush'; // flush, explode
        let papyrusClickedOnce = false;
        let papyrusClickCount = 0;
        let flushCount = 0;

        function showScreen(screenName) {
            Object.values(screens).forEach(screen => screen.classList.add('hidden'));
            screens[screenName].classList.remove('hidden');
            gameState = (screenName.includes('Ending') || ['escape', 'sans', 'explosion'].includes(screenName)) ? 'ending' : (screenName === 'pause' ? 'paused' : (screenName === 'title' ? 'title' : 'playing'));
        }

        function resetGame() {
            speedrunMode = false;
            objective = 'flush';
            papyrusClickedOnce = false;
            papyrusClickCount = 0;
            flushCount = 0;
            buttons.speedrunStatus.textContent = 'Off';
            elements.objectiveText.innerHTML = 'Objective:<br>Flush the toilet.';
            buttons.flush.style.backgroundColor = 'white';
            elements.toiletFill.classList.add('hidden');
             elements.poopOverlay.classList.add('hidden');
            showScreen('title');
        }

        // --- Event Listeners ---

        buttons.start.addEventListener('click', () => {
            showScreen('game');
        });

        buttons.speedrun.addEventListener('click', () => {
            speedrunMode = !speedrunMode;
            buttons.speedrunStatus.textContent = speedrunMode ? 'On' : 'Off';
            // Speedrun mode doesn't actually change gameplay in this version, just text
        });

        buttons.flush.addEventListener('click', () => {
            if (objective === 'flush') {
                flushCount++;
                // Simple flush animation/effect
                elements.toiletFill.classList.remove('hidden');
                 elements.poopOverlay.classList.add('hidden'); // Hide poop on flush
                setTimeout(() => elements.toiletFill.classList.add('hidden'), 300); // Hide water after delay

                // Trigger Good Ending if Papyrus was clicked
                if (papyrusClickedOnce) {
                    showScreen('goodEnding');
                } else if (flushCount > 3 && Math.random() < 0.5) { // Chance to show poop after a few flushes if Papyrus not involved
                     elements.poopOverlay.classList.remove('hidden');
                }

            } else if (objective === 'explode') {
                showScreen('explosion');
            }
        });

        buttons.pauseArea.addEventListener('click', () => {
             if (gameState === 'playing') {
                 showScreen('pause');
                 // Reset papyrus click count for secret ending check when entering pause menu
                 papyrusClickCount = 0;
             }
        });

         // Allow pausing with 'P' key as well
         document.addEventListener('keydown', (e) => {
             if (e.key.toLowerCase() === 'p' && gameState === 'playing') {
                 showScreen('pause');
                 papyrusClickCount = 0; // Reset count when pausing
             }
         });


        buttons.resume.addEventListener('click', () => {
            showScreen('game');
        });

        buttons.quit.addEventListener('click', () => {
            if (objective === 'explode') {
                showScreen('escape');
            } else {
                resetGame(); // Go back to title screen
            }
        });

        buttons.papyrus.addEventListener('click', () => {
            papyrusClickCount++;

            if (!papyrusClickedOnce) {
                papyrusClickedOnce = true;
                objective = 'explode';
                elements.objectiveText.innerHTML = 'Objective:<br>Explode the toilet.';
                buttons.flush.style.backgroundColor = 'red';
                 elements.poopOverlay.classList.remove('hidden'); // Show poop when objective changes
                showScreen('game'); // Go back to game immediately after first click
            } else if (papyrusClickCount >= 2) { // Trigger secret ending on second click within same pause instance
                showScreen('secretEnding');
            }
             // If clicked once, subsequent clicks in DIFFERENT pause sessions won't trigger secret ending immediately
        });

        buttons.hell.addEventListener('click', () => {
            showScreen('sans');
        });

        buttons.escapeContinue.addEventListener('click', () => {
            // Directly to bad ending after trying to escape explosion
            showScreen('badEnding');
        });

        buttons.fight.addEventListener('click', () => {
            showScreen('badEnding');
        });

        buttons.mercy.addEventListener('click', () => {
            showScreen('badEnding');
        });

        buttons.restart.forEach(button => {
            button.addEventListener('click', resetGame);
        });

        // Initialize
        resetGame(); // Start on the title screen

    </script>

</body>
</html>